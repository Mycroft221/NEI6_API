<!DOCTYPE html>
<html>
<meta name="viewport" content="user-scalable=no, initial-scale=1, width=device-width, height=device-height, viewport-fit=cover">

<style>
body{
    padding-top: constant(safe-area-inset-top);
    padding-top: env(safe-area-inset-top);
}
input[type="radio"] {
    display: none;
}
input[type="checkbox"] {
    display: none;
}
input[type="number"] {
    margin: 4px 5px;
    margin-bottom: 18px;
    width: 128px;
    height: 15px;
}
input[type="button"] {
  float: left;
  padding: 8px 20px;
  background-color: rgb(0, 255, 0);
  border-radius: 10px;
  margin:5px;
}

label {
  float: none;
  padding: 8px 20px;
  background-color: rgb(218, 230, 255);
  border: thin solid rgb(0, 4, 255);
  border-radius: 10px;
  margin:3px;
  margin-top: 6px;
  margin-bottom:2px;
  display: inline-block;
}

input[type="radio"]:checked + label {
    background-color: rgb(0, 4, 255);
    cursor: default;
    color: #E6E6E6;
}

input[type="checkbox"]:checked + label {
    background-color: rgb(0, 4, 255);
    cursor: default;
    color: #E6E6E6;
}

p {
    font:bold;
    font-size: 110%;
    text-indent: 10px;
    margin-bottom: 0px;
    margin-top: 8px;
}
h2 {
    text-indent: 10px;
}
</style>
<script>
function httpGet(theUrl){
    // alert(theUrl);
    // alert("httpGet called");
    var xmlHttp = new XMLHttpRequest();
    // alert("var created");
    xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
    // alert("opened");
    xmlHttp.send( null );
    // alert("request sent");
    // alert(xmlHttp.responseText);
    return xmlHttp.responseText;
}
function handlePrediction(prediction) {
    const pred = + prediction[1];
    const ident = + prediction.slice(3, -1);
    console.log(pred, ident);
    alert("identifier: " + ident)
    if (pred == 1) {
        window.location = 'true.html';
    } else {
        window.location = 'false.html';
    }
}
</script>
<body>

<h2>NEI-6 Trauma Triage</h2>
<!-- <p>The <strong>input type="radio"</strong> defines a radio button:</p> -->


<form>
  <p>Transfer</p>
  <input type="radio" id="a" name="0">
  <label for="a">ALS</label>
  <input type="radio" id="an" name="0" checked>
  <label for="an">BLS</label>
  <br><br>

  <p>Temperature (F)</p>
  <input type="number" id="b" step="any">
  <br>

  <p>Obesity</p>
  <input type="radio" id="c" name="1">
  <label for="c">Yes</label>
  <input type="radio" id="cn" name="1" checked>
  <label for="cn">No</label>
  <br><br>

  <p>Helmet Use</p>
  <input type="radio" id="d" name="2">
  <label for="d">Yes</label>
  <input type="radio" id="dn" name="2" checked>
  <label for="dn">No</label>
  <br><br>

  <p>Systolic Blood Pressure</p>
  <input type="number" id="e" step="1">
  <br>

  <p>Pulse</p>
  <input type="number" id="f" step="1">
  <br>

  <p>GCS Score</p>
  <input type="number" id="g" step="1">
  <br>

  <p>Open Fracture</p>
  <input type="radio" id="h" name="3">
  <label for="h">Yes</label>
  <input type="radio" id="hn" name="3" checked>
  <label for="hn">No</label>
  <br><br>

  <p>Central Gunshot Wound</p>
  <input type="radio" id="i" name="4">
  <label for="i">Yes</label>
  <input type="radio" id="in" name="4" checked>
  <label for="in">No</label>
  <br><br>

  <p>Gender</p>
  <input type="radio" id="j" name="10">
  <label for="j">Male</label>
  <input type="radio" id="jn" name="10">
  <label for="jn">Female</label>
  <br><br>

  <p>Private Insurance</p>
  <input type="radio" id="k" name="11">
  <label for="k">Yes</label>
  <input type="radio" id="kn" name="11" checked>
  <label for="kn">No</label>
  <br><br>

  <p>Evening Arrival</p>
  <input type="radio" id="l" name="12">
  <label for="l">Yes</label>
  <input type="radio" id="ln" name="12" checked>
  <label for="ln">No</label>
  <br><br>

  <p>Age</p>
  <input type="number" id="m" step="1">
  <br>

  <!-- 14-18 nopqr-->
  
  <p>Race</p>
  <input type="checkbox" id="s" name="rw">
  <label for="s">white</label>
  <input type="checkbox" id="t" name="rb">
  <label for="t">black</label>
  <input type="checkbox" id="u" name="ro">
  <label for="u">other</label>
  <br><br>

  <p>Mechanism of Injury</p>
  <input type="checkbox" id="w">
  <label for="w">cut</label>
  <input type="checkbox" id="x">
  <label for="x">firearm</label>
  <input type="checkbox" id="y">
  <label for="y">fall</label>
  <input type="checkbox" id="z">
  <label for="z">mvc</label>
  <input type="checkbox" id="aa">
  <label for="aa">mcc</label>
  <input type="checkbox" id="ab">
  <label for="ab">pedal</label>
  <input type="checkbox" id="ac">
  <label for="ac">struck</label>
  <input type="checkbox" id="v">
  <label for="v">other</label>
  <br><br>

  <p>Intentionality</p>
  <input type="checkbox" id="ad">
  <label for="ad">unintentional</label>
  <input type="checkbox" id="ae">
  <label for="ae">self inflicted</label>
  <input type="checkbox" id="af">
  <label for="af">assault</label>
  <input type="checkbox" id="ag">
  <label for="ag">undetermined</label>
  <input type="checkbox" id="ah">
  <label for="ah">other (legal intervention/war)</label>
  <br><br>

  <p>Transport Distance</p>
  <input type="radio" name="transport" id="ai">
  <label for="ai">less than 15 mins</label>
  <input type="radio" name="transport" id="aj">
  <label for="aj">15 - 30 mins</label>
  <input type="radio" name="transport" id="ak">
  <label for="ak">more than 30 mins</label>
  <br><br>

  <p>Transfer Method</p>
  <input type="checkbox" id="al">
  <label for="al">ground</label>
  <input type="checkbox" id="am">
  <label for="am">helicopter</label>
  <input type="checkbox" id="ao">
  <label for="ao">other</label>
  <br><br>

  <p>Predicted AIS > 3</p>
  <input type="checkbox" id="ap">
  <label for="ap">chest</label>
  <input type="checkbox" id="aq">
  <label for="aq">head/neck</label>
  <input type="checkbox" id="ar">
  <label for="ar">abdomen</label>
  <input type="checkbox" id="as">
  <label for="as">extremity</label>
  <input type="checkbox" id="at">
  <label for="at">spine</label>
  <br><br>

  <p>Predicted Transport Time (min)</p>
  <input type="number" id="au" step="any">
  <br>

  <p>Legal Intervention</p>
  <input type="radio" id="av" name="14">
  <label for="av">Yes</label>
  <input type="radio" id="avn" name="14" checked>
  <label for="avn">No</label>
  <br><br>

  <p>Field Assisted Ventilation</p>
  <input type="checkbox" id="aw">
  <label for="aw">intubated</label>
  <input type="checkbox" id="ax">
  <label for="ax">king airway</label>
  <input type="checkbox" id="ay">
  <label for="ay">LMA</label>
  <input type="checkbox" id="az">
  <label for="az">BVM</label>
  <br><br>

  <p>Field Receiving Blood</p>
  <input type="radio" id="ba" name="15">
  <label for="ba">Yes</label>
  <input type="radio" id="ban" name="15" checked>
  <label for="ban">No</label>
  <br><br>

  <p>Transport Distance (miles)</p>
  <input type="number" id="bb" step="any">
  <br>

  <p>Prehospital FAST</p>
  <input type="radio" id="bc" name="16">
  <label for="bc">Yes</label>
  <input type="radio" id="bcn" name="16" checked>
  <label for="bcn">No</label>
  <br><br>

  <p>Prehospital FAST Pericardial Window</p>
  <input type="radio" id="bd" name="17">
  <label for="bd">Yes</label>
  <input type="radio" id="bdn" name="17" checked>
  <label for="bdn">No</label>
  <br><br>

  <p>End Tidal CO2 (mmHg)</p>
  <input type="number" id="be" step="any">
  <br>

  <p>Base Deficit (Meq/L)</p>
  <input type="number" id="bf" step="any">
  <br>


  <!-- <input type="button" value="test" onclick="alert(
      (+ a.checked) + ',' + b.value + ',' + (+ c.checked) + 
      ',' + (+ d.checked) + ',' + e.value + ',' + f.value + ',' + 
      g.value + ',' + (+ h.checked) + ',' + (+ i.checked) + ',' + 
      (+ j.checked) + ',' + (+ k.checked) + ',' + (+ l.checked)
      + ',' + m.value + ',' + (+ s.checked) + ',' + (+  t.checked) + 
      ',' + (+ u.checked) + ',' + (+ v.checked) + ',' + (+ w.checked) + 
      ',' + (+ x.checked) + ',' + (+ y.checked) + ',' + (+ z.checked) + 
      ',' + (+ aa.checked) + ',' + (+ ab.checked) + ',' + (+ ac.checked)
      + ',' + (+ ad.checked) + ',' + (+ ae.checked) + ',' + (+ af.checked) 
      + ',' + (+ ag.checked) + ',' + (+ ah.checked) + ',' + (+ ai.checked) 
      + ',' + (+ aj.checked) + ',' + (+ ak.checked))"> -->



  <br>
  <!-- <input type="radio" id="a" name="d" value="male">
  <label for="a">Male</label><br>
  <input type="radio" id="b" name="d" value="female">
  <label for="b">Female</label><br> -->
  <!-- <input type="radio" id="c" name="d" value="other">
  <label for="c">Other</label><br> -->
  <!-- <input type="submit" value="Submit" onclick="alert(female.checked + 1)"> -->
  <input type="button" value="Submit" onclick="handlePrediction(httpGet(
    //   'http\://ec2-35-163-138-174.us-west-2.compute.amazonaws.com:8080/predict?values='
    'https\://nei6.ddns.net:8443/predict?values='
    // 'http\://localhost:8080/predict?values='
      + (+ a.checked) + ',' + ((b.value - 46.58) / 56.92) + ',' + (+ c.checked) + 
      ',' + (+ d.checked) + ',' + e.value / 285 + ',' + f.value / 224 + ',' + 
      (g.value - 3) / 12 + ',' + (+ h.checked) + ',' + (+ i.checked) + ',' + 
      (+ j.checked) + ',' + (+ k.checked) + ',' + (+ l.checked)
      + ',' + (m.value - 16) / 74 + ',' + + (b.value == '') + ',' + + (e.value == '') 
      + ',' + + (f.value == '') + ',' + + (g.value = '') + ',' + 
      (+ !(ad.checked || ae.checked || af.checked || ag.checked ||
      ah.checked))
      + ',' + (+ s.checked) + ',' + (+  t.checked) + 
      ',' + (+ u.checked) + ',' + (+ v.checked) + ',' + (+ w.checked) + 
      ',' + (+ x.checked) + ',' + (+ y.checked) + ',' + (+ z.checked) + 
      ',' + (+ aa.checked) + ',' + (+ ab.checked) + ',' + (+ ac.checked)
      + ',' + (+ ad.checked) + ',' + (+ ae.checked) + ',' + (+ af.checked) 
      + ',' + (+ ag.checked) + ',' + (+ ah.checked) + ',' + (+ ai.checked) 
      + ',' + (+ aj.checked) + ',' + (+ ak.checked) + ',' + (+ al.checked) 
      + ',' + (+ am.checked) + ',' + (+ ao.checked) + ',' + (+ ap.checked) 
      + ',' + (+ aq.checked) + ',' + (+ ar.checked) + ',' + (+ as.checked) 
      + ',' + (+ at.checked) + ',' + (au.value + 0)
      + ',' + (+ av.checked) + ',' + (+ aw.checked)
       + ',' + (+ ax.checked) + ',' + (+ ay.checked) + ',' + (+ az.checked)
       + ',' + (+ ba.checked) + ',' + (bb.value + 0) + ',' + (+ bc.checked) + 
       ',' + (+ bd.checked) + ',' + (be.value + 0) + ',' + (bf.value + 0)))">
  <br><br><br>
</form> 

</body>
</html>
